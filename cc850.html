<header>
  <div id="navbar-include"></div>
  <script>
    fetch('components/navbar.html').then(res => res.text()).then(html => {
      document.getElementById('navbar-include').innerHTML = html;
      // Hamburger/overlay logic after navbar is injected
      var openBtn = document.getElementById('open-overlay-navbar');
      var closeBtn = document.getElementById('overlay-navbar-close');
      var overlay = document.getElementById('overlay-navbar');
      var navbar = document.querySelector('.main-navbar-bar');
      var lastScrollY = window.scrollY;
      var ticking = false;
      if (openBtn && overlay) {
        openBtn.onclick = function() {
          overlay.classList.add('open');
          document.body.style.overflow = 'hidden';
          navbar.classList.add('hide-navbar');
        };
      }
      if (closeBtn && overlay) {
        closeBtn.onclick = function() {
          overlay.classList.remove('open');
          document.body.style.overflow = '';
          navbar.classList.remove('hide-navbar');
        };
      }
      if (overlay) {
        overlay.addEventListener('click', function(e) {
          if (e.target === overlay) {
            overlay.classList.remove('open');
            document.body.style.overflow = '';
            navbar.classList.remove('hide-navbar');
          }
        });
      }
      // Hide navbar on scroll down, show on scroll up
      function onScroll() {
        if (overlay.classList.contains('open')) return;
        if (window.scrollY > lastScrollY && window.scrollY > 40) {
          navbar.classList.add('hide-navbar');
        } else if (window.scrollY < lastScrollY) {
          navbar.classList.remove('hide-navbar');
        }
        lastScrollY = window.scrollY;
      }
      window.addEventListener('scroll', function() {
        if (!ticking) {
          window.requestAnimationFrame(function() {
            onScroll();
            ticking = false;
          });
          ticking = true;
        }
      });
    });
  </script>
</header>
